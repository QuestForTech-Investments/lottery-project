import React, { useState } from "react";

export default function CreateUser() {
  const [formData, setFormData] = useState({
    username: "",
    password: "",
    confirmPassword: "",
    role: "",
    active: true,
    permissions: {
      create: false,
      edit: false,
      delete: false,
      view: false,
    },
  });

  const handleChange = (e) => {
    const { name, value, type, checked } = e.target;
    if (name.startsWith("perm_")) {
      setFormData({
        ...formData,
        permissions: { ...formData.permissions, [name.replace("perm_", "")]: checked },
      });
    } else {
      setFormData({
        ...formData,
        [name]: type === "checkbox" ? checked : value,
      });
    }
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    console.log("Form data:", formData);
    alert("User created successfully âœ…");
  };

  return (
    <div id="page-content" className="container mt-5">
      <div className="card card-task">
        {/* Header */}
        <div className="card-header text-center">
          <h3 className="header text-center">
            <span>Create User</span>
          </h3>
        </div>

        {/* Body */}
        <div className="card-body">
          <form onSubmit={handleSubmit}>
            {/* Username */}
            <div className="form-group row justify-content-center">
              <label htmlFor="username" className="col-sm-2 offset-sm-2 col-form-label text-end">
                Username
              </label>
              <div className="col-sm-4">
                <input
                  id="username"
                  name="username"
                  type="text"
                  className="form-control"
                  placeholder="Username"
                  value={formData.username}
                  onChange={handleChange}
                />
              </div>
            </div>

            {/* Password */}
            <div className="form-group row justify-content-center">
              <label htmlFor="password" className="col-sm-2 offset-sm-2 col-form-label text-end">
                Password
              </label>
              <div className="col-sm-4">
                <input
                  id="password"
                  name="password"
                  type="password"
                  className="form-control"
                  placeholder="Password"
                  value={formData.password}
                  onChange={handleChange}
                />
              </div>
            </div>

            {/* Confirm Password */}
            <div className="form-group row justify-content-center">
              <label htmlFor="confirmPassword" className="col-sm-2 offset-sm-2 col-form-label text-end">
                Confirm Password
              </label>
              <div className="col-sm-4">
                <input
                  id="confirmPassword"
                  name="confirmPassword"
                  type="password"
                  className="form-control"
                  placeholder="Confirm Password"
                  value={formData.confirmPassword}
                  onChange={handleChange}
                />
              </div>
            </div>

            {/* Role */}
            <div className="form-group row justify-content-center">
              <label htmlFor="role" className="col-sm-2 offset-sm-2 col-form-label text-end">
                Role
              </label>
              <div className="col-sm-4">
                <select
                  id="role"
                  name="role"
                  className="form-select"
                  value={formData.role}
                  onChange={handleChange}
                >
                  <option value="">Select a role</option>
                  <option value="administrator">Administrator</option>
                  <option value="supervisor">Supervisor</option>
                  <option value="operator">Operator</option>
                </select>
              </div>
            </div>

            {/* Active Switch */}
            <div className="form-group row justify-content-center align-items-center mt-4">
              <label className="col-sm-2 offset-sm-2 col-form-label text-end">
                Status
              </label>
              <div className="col-sm-4 d-flex align-items-center">
                <div className="form-check form-switch">
                  <input
                    className="form-check-input"
                    type="checkbox"
                    id="active"
                    name="active"
                    checked={formData.active}
                    onChange={handleChange}
                  />
                  <label className="form-check-label ms-2" htmlFor="active">
                    {formData.active ? "Active" : "Inactive"}
                  </label>
                </div>
              </div>
            </div>

            {/* Permissions */}
            <div className="form-group checkboxes mt-5">
              <div className="row">
                <div className="col-md-6">
                  <div className="card col-12">
                    <div className="card-body">
                      <div className="row">
                        <div className="col-12 mb-3">
                          <h5 className="text-secondary">Permissions</h5>
                        </div>

                        {/* Create */}
                        <div className="col-12 mb-2 d-flex">
                          <div className="form-check form-check-inline">
                            <input
                              className="form-check-input"
                              type="checkbox"
                              id="perm_create"
                              name="perm_create"
                              checked={formData.permissions.create}
                              onChange={handleChange}
                            />
                            <label className="form-check-label ms-2" htmlFor="perm_create">
                              Create
                            </label>
                          </div>
                        </div>

                        {/* Edit */}
                        <div className="col-12 mb-2 d-flex">
                          <div className="form-check form-check-inline">
                            <input
                              className="form-check-input"
                              type="checkbox"
                              id="perm_edit"
                              name="perm_edit"
                              checked={formData.permissions.edit}
                              onChange={handleChange}
                            />
                            <label className="form-check-label ms-2" htmlFor="perm_edit">
                              Edit
                            </label>
                          </div>
                        </div>

                        {/* Delete */}
                        <div className="col-12 mb-2 d-flex">
                          <div className="form-check form-check-inline">
                            <input
                              className="form-check-input"
                              type="checkbox"
                              id="perm_delete"
                              name="perm_delete"
                              checked={formData.permissions.delete}
                              onChange={handleChange}
                            />
                            <label className="form-check-label ms-2" htmlFor="perm_delete">
                              Delete
                            </label>
                          </div>
                        </div>

                        {/* View */}
                        <div className="col-12 mb-2 d-flex">
                          <div className="form-check form-check-inline">
                            <input
                              className="form-check-input"
                              type="checkbox"
                              id="perm_view"
                              name="perm_view"
                              checked={formData.permissions.view}
                              onChange={handleChange}
                            />
                            <label className="form-check-label ms-2" htmlFor="perm_view">
                              View
                            </label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            {/* Submit */}
            <div className="text-center mt-5">
              <button type="submit" className="btn btn-success btn-round px-5">
                Save User
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  );
}
